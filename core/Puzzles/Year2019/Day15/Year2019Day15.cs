using Core.Platform;

namespace Core.Puzzles.Year2019.Day15;

public class Year2019Day15 : Puzzle
{
    public override string Title => "Oxygen System";
    public override string Comment => "Repair droid";
    public override bool IsSlow => true;

    // todo: speed up the matrix exploration code
    public override PuzzleResult RunPart1()
    {
        // VERY SLOW
        var droid = new RepairDroid(FileInput);
        var result1 = droid.Run();

        return new PuzzleResult(result1, 424);
    }

    public override PuzzleResult RunPart2()
    {
        var filler = new OxygenFiller(GeneratedMapFromStep1);
        var result = filler.Fill();

        return new PuzzleResult(result, 446);
    }

    private const string GeneratedMapFromStep1 = """
 # ############# ### ##### ############# 
#.#.............#...#.....#.............#
#.#.#.#########.###.#.#.#.#########.###.#
#...#.......#.#...#...#.#...#.....#.#...#
#.#########.#.###.#.###.###.#.###.#.#.## 
#.....#...#.#.....#.#...#.....#.#.#.#...#
 ######.#.#.#.#######.#########.#.#.###.#
#.......#...#...#...#.#...#.......#.#...#
#.#############.#.#.#.#.#.###.#######.#.#
#...#.....#...#...#.#...#...#.........#.#
#.#.#.###.#.#######.###.###.#.#########.#
#.#.#...#.#...........#.#...#.#...#.....#
#.#.###.#.#.#########.###.#####.#.#.#### 
#.#.....#.#...#...#.....#.#.....#.#.....#
#.#######.#####.#.#####.#.#.#####.#####.#
#.#...#.#.......#...#.....#.....#.#.....#
#.#.#.#.######## ##.#######.#####.###### 
#.#.#.#.........#.#.#.......#...#.#.....#
#.#.#.#.#######.#.#.#.#######.#.#.#.###.#
#...#...#.#.....#.#...#.......#.#.....#.#
 ########.#.#####.#####.#######.#####.#.#
#.....#.....#.....#.#...#.....#.....#.#.#
#.###.#.#####.###.#.#####.#.#######.###.#
#.#...#.....#.#.#.......#.#.....#...#...#
#.#### ####.#.#.#.#####.## ####.#.###.#.#
#.#...#...#.#.#...#...#...#.....#.#...#.#
#.#.#.#.#.#.#.#####.#.###.#.###.#.###.## 
#...#...#...#.......#.#...#.#.#.#...#...#
#.#############.#####.###.#.#.#.###.###.#
#.#...........#.#...#...#.#.#.....#.#...#
#.#####.#####.#.#.#.###.#.#.#####.#.#.## 
#...#...#...#.#...#.#.#.#...#...#.#...#.#
 ##.#.###.#.#.#####.#.#.#.###.#.#.#####.#
#.#.#.#...#.#.#.......#.#.#...#.#...#...#
#.#.#.#.#####.#######.#.###.###.###.#.#.#
#.#...#.....#...#...#.#.....#...#...#.#.#
#.#####.###.###.#.#.#########.###.###.#.#
#...#...#.#.....#.#.#.....#...#.#...#X#.#
#.###.###.#######.#.#.###.#.###.###.###.#
#.................#...#.....#...........#
 ################# ### ##### ########### 
""";
}